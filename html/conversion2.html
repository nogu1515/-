<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="../css/conversion2.css">
        <title>csv変換ツール</title>
    </head>
    <body>
        <table align="center">
            <tr>
                <th>
                    <div class="title">CSV to JSON Online Converter</div>
                </th>
                <th>
                    <img src="../image/csv_image.png" width="64" height="64">
                    <img src="../image/yajirushi.png" width="64" height="64">
                    <img src="../image/json_icon.png" width="64" height="64">
                </th>
            </tr>
        </table>

        <br><br>

        <table align="center">
            <tr>
                <td colspan="2">
                    <form name="conform">
                        <input name="myfile" type="file" accept=".csv"><br>
                        <textarea name="output" cols="120" rows="30" disabled></textarea>
                    </form>
                </td>
            </tr>
            <tr>
                <td>
                    <button type="button" onclick="formReset()" class="btn btn-solid">クリア</button>
                </td>
                <td class="btn1">
                    <button id="btn3" class="btn btn-solid" download="unknown.csv">ダウンロード</button>
                    <button class="btn btn-solid" id="copy">コピー</button>
                </td>
            </tr>
        </table>
        <script>
            var form = document.forms.conform;
            form.myfile.addEventListener( 'change', function(e) {
                var result = e.target.files[0];
                var reader = new FileReader();
                reader.readAsText( result );
                reader.addEventListener( 'load', function() {
                    form.output.textContent = reader.result;    
                })
            })

            var results = e.target.files;
            var end = e.target.files.length;
            for(var i = 0; i < end; i++) {
                var reader = new FileReader();

                reader.readAsText( results[i] );
                reader.addEventListener('load', function(e) {
                    console.log( e.target.result );
                })
            }

            function formReset() {
                document.conform.reset();
            }
        </script>
    </body>
</html>
